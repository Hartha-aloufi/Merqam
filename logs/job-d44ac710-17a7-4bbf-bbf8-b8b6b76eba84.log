{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job logger initialized for job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T20:53:57.540Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84 started processing","metadata":{"data":{"aiService":"gemini","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T20:53:57.541Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Progress: 0% - Initialized","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T20:53:57.542Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job data extracted","metadata":{"aiService":"gemini","jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"timestamp":"2025-03-02T20:53:57.542Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Starting content processing","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21"},"timestamp":"2025-03-02T20:53:57.543Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Content processing completed","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","title":"21 - السيرة النبوية -  الهجرة إلى الحبشة وسجود المشركين لروعة القرآن . أ/ محمد إلهامي","videoId":"M71UO3C7ID4"},"timestamp":"2025-03-02T20:55:50.679Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Starting database transaction to save results","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T20:55:50.680Z"}
{"level":"debug","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Using existing speaker","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda"},"timestamp":"2025-03-02T20:55:50.681Z"}
{"level":"debug","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Using existing playlist","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0"},"timestamp":"2025-03-02T20:55:50.682Z"}
{"level":"debug","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Creating YouTube video entry","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","videoId":"M71UO3C7ID4"},"timestamp":"2025-03-02T20:55:50.682Z"}
{"level":"error","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84 failed","metadata":{"error":{"message":"Cannot read properties of undefined (reading 'slice')","name":"JobError","stack":"JobError: Cannot read properties of undefined (reading 'slice')\n    at processError (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\job-error-utils.ts:161:9)\n    at Worker.processJob (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\lesson-generation-worker.ts:210:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:910:26)\n    at async Worker.retryIfFailed (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:1174:16)"},"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T20:55:50.779Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] METRIC.executionTime","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","metric":{"name":"executionTime","unit":"ms","value":113.238},"status":"failed"},"timestamp":"2025-03-02T20:55:50.780Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job logger initialized for job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:02:19.774Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84 started processing","metadata":{"data":{"aiService":"gemini","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:02:19.775Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Progress: 0% - Initialized","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:02:19.775Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job data extracted","metadata":{"aiService":"gemini","jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"timestamp":"2025-03-02T21:02:19.776Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Starting content processing","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21"},"timestamp":"2025-03-02T21:02:19.777Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Content processing completed","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","title":"21 - السيرة النبوية -  الهجرة إلى الحبشة وسجود المشركين لروعة القرآن . أ/ محمد إلهامي","videoId":"M71UO3C7ID4"},"timestamp":"2025-03-02T21:04:36.214Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Starting database transaction to save results","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:04:36.215Z"}
{"level":"debug","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Using existing speaker","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda"},"timestamp":"2025-03-02T21:04:36.216Z"}
{"level":"debug","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Using existing playlist","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0"},"timestamp":"2025-03-02T21:04:36.217Z"}
{"level":"debug","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Creating YouTube video entry","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","videoId":"M71UO3C7ID4"},"timestamp":"2025-03-02T21:04:36.217Z"}
{"level":"error","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84 failed","metadata":{"error":{"message":"Cannot read properties of undefined (reading 'slice')","name":"JobError","stack":"JobError: Cannot read properties of undefined (reading 'slice')\n    at processError (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\job-error-utils.ts:161:9)\n    at Worker.processJob (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\lesson-generation-worker.ts:210:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:910:26)\n    at async Worker.retryIfFailed (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:1174:16)"},"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:04:36.314Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] METRIC.executionTime","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","metric":{"name":"executionTime","unit":"ms","value":136.539},"status":"failed"},"timestamp":"2025-03-02T21:04:36.315Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job logger initialized for job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:10:29.639Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84 started processing","metadata":{"data":{"aiService":"gemini","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:10:29.640Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Progress: 0% - Initialized","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:10:29.641Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job data extracted","metadata":{"aiService":"gemini","jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"timestamp":"2025-03-02T21:10:29.641Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Starting content processing","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","url":"https://www.youtube.com/watch?v=M71UO3C7ID4&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=21"},"timestamp":"2025-03-02T21:10:29.643Z"}
{"level":"error","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] Job d44ac710-17a7-4bbf-bbf8-b8b6b76eba84 failed","metadata":{"error":{"message":"AI processing failed","name":"JobError","stack":"JobError: AI processing failed\n    at EnhancedTxtToMdxConverter.processWithAI (C:\\Users\\month\\workspace\\Merqam\\src\\client\\lib\\txt-to-mdx\\enhanced-converter.ts:269:10)\n    at async EnhancedTxtToMdxConverter.processContent (C:\\Users\\month\\workspace\\Merqam\\src\\client\\lib\\txt-to-mdx\\enhanced-converter.ts:103:29)\n    at async Worker.processJob (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\lesson-generation-worker.ts:72:28)\n    at async <anonymous> (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:910:26)\n    at async Worker.retryIfFailed (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:1174:16)"},"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84"},"timestamp":"2025-03-02T21:12:35.964Z"}
{"level":"info","message":"[lesson-generation:d44ac710-17a7-4bbf-bbf8-b8b6b76eba84] METRIC.executionTime","metadata":{"jobId":"d44ac710-17a7-4bbf-bbf8-b8b6b76eba84","metric":{"name":"executionTime","unit":"ms","value":126.324},"status":"failed"},"timestamp":"2025-03-02T21:12:35.965Z"}
