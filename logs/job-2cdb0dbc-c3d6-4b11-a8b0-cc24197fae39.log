{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job logger initialized for job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T20:52:01.607Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39 started processing","metadata":{"data":{"aiService":"gemini","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T20:52:01.608Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Progress: 0% - Initialized","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T20:52:01.610Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job data extracted","metadata":{"aiService":"gemini","jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"timestamp":"2025-03-02T20:52:01.611Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Starting content processing","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20"},"timestamp":"2025-03-02T20:52:01.614Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Content processing completed","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","title":"20- السيرة النبوية - أمور منسية في المرحلة المكية  نهج النبي في مواجهة التعذيب   أستاذ محمد إلهامي","videoId":"T86LWLgnzjI"},"timestamp":"2025-03-02T20:53:57.418Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Starting database transaction to save results","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T20:53:57.419Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Using existing speaker","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda"},"timestamp":"2025-03-02T20:53:57.421Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Using existing playlist","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0"},"timestamp":"2025-03-02T20:53:57.422Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Creating YouTube video entry","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","videoId":"T86LWLgnzjI"},"timestamp":"2025-03-02T20:53:57.423Z"}
{"level":"error","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39 failed","metadata":{"error":{"message":"Cannot read properties of undefined (reading 'slice')","name":"JobError","stack":"JobError: Cannot read properties of undefined (reading 'slice')\n    at processError (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\job-error-utils.ts:161:9)\n    at Worker.processJob (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\lesson-generation-worker.ts:210:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:910:26)\n    at async Worker.retryIfFailed (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:1174:16)"},"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T20:53:57.533Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] METRIC.executionTime","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","metric":{"name":"executionTime","unit":"ms","value":115.925},"status":"failed"},"timestamp":"2025-03-02T20:53:57.534Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job logger initialized for job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:00:15.942Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39 started processing","metadata":{"data":{"aiService":"gemini","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:00:15.943Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Progress: 0% - Initialized","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:00:15.944Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job data extracted","metadata":{"aiService":"gemini","jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"timestamp":"2025-03-02T21:00:15.944Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Starting content processing","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20"},"timestamp":"2025-03-02T21:00:15.945Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Content processing completed","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","title":"20- السيرة النبوية - أمور منسية في المرحلة المكية  نهج النبي في مواجهة التعذيب   أستاذ محمد إلهامي","videoId":"T86LWLgnzjI"},"timestamp":"2025-03-02T21:02:19.666Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Starting database transaction to save results","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:02:19.666Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Using existing speaker","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda"},"timestamp":"2025-03-02T21:02:19.668Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Using existing playlist","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0"},"timestamp":"2025-03-02T21:02:19.668Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Creating YouTube video entry","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","videoId":"T86LWLgnzjI"},"timestamp":"2025-03-02T21:02:19.669Z"}
{"level":"error","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39 failed","metadata":{"error":{"message":"Cannot read properties of undefined (reading 'slice')","name":"JobError","stack":"JobError: Cannot read properties of undefined (reading 'slice')\n    at processError (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\job-error-utils.ts:161:9)\n    at Worker.processJob (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\lesson-generation-worker.ts:210:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:910:26)\n    at async Worker.retryIfFailed (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:1174:16)"},"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:02:19.767Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] METRIC.executionTime","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","metric":{"name":"executionTime","unit":"ms","value":123.824},"status":"failed"},"timestamp":"2025-03-02T21:02:19.768Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job logger initialized for job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:08:43.959Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39 started processing","metadata":{"data":{"aiService":"gemini","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:08:43.960Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Progress: 0% - Initialized","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:08:43.960Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job data extracted","metadata":{"aiService":"gemini","jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20","userId":"8a15ac58-4373-4eaf-ad86-4cfdf4b60abe"},"timestamp":"2025-03-02T21:08:43.961Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Starting content processing","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","url":"https://www.youtube.com/watch?v=T86LWLgnzjI&list=PLi0wnr6UH6EnuEwNMma1x8fhEVgEBT2uS&index=20"},"timestamp":"2025-03-02T21:08:43.962Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Content processing completed","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","title":"20- السيرة النبوية - أمور منسية في المرحلة المكية  نهج النبي في مواجهة التعذيب   أستاذ محمد إلهامي","videoId":"T86LWLgnzjI"},"timestamp":"2025-03-02T21:10:29.533Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Starting database transaction to save results","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:10:29.533Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Using existing speaker","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda"},"timestamp":"2025-03-02T21:10:29.535Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Using existing playlist","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0"},"timestamp":"2025-03-02T21:10:29.535Z"}
{"level":"debug","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Creating YouTube video entry","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","playlistId":"PLnpknmCXt_N5X7DKYKcYk5EkyW0-wmyJ0","speakerId":"c35d6b61-89d0-444b-8ef4-7a84725a0dda","videoId":"T86LWLgnzjI"},"timestamp":"2025-03-02T21:10:29.536Z"}
{"level":"error","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] Job 2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39 failed","metadata":{"error":{"message":"Cannot read properties of undefined (reading 'slice')","name":"JobError","stack":"JobError: Cannot read properties of undefined (reading 'slice')\n    at processError (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\job-error-utils.ts:161:9)\n    at Worker.processJob (C:\\Users\\month\\workspace\\Merqam\\src\\server\\queue\\lesson-generation-worker.ts:210:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:910:26)\n    at async Worker.retryIfFailed (C:\\Users\\month\\workspace\\Merqam\\node_modules\\bullmq\\src\\classes\\worker.ts:1174:16)"},"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39"},"timestamp":"2025-03-02T21:10:29.633Z"}
{"level":"info","message":"[lesson-generation:2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39] METRIC.executionTime","metadata":{"jobId":"2cdb0dbc-c3d6-4b11-a8b0-cc24197fae39","metric":{"name":"executionTime","unit":"ms","value":105.673},"status":"failed"},"timestamp":"2025-03-02T21:10:29.634Z"}
